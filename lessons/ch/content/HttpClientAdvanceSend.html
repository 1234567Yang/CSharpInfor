<p>发送数据，高级用法：</p>



<br><br><br>
<ul>
    <li>先来个设置cookie: </li>
</ul>
<textarea class="codeTextarea">
public static void HttpClientCookieExample()
{
    HttpClient httpClient = new HttpClient();
    string cookie = "*********";
    httpClient.DefaultRequestHeaders.Add("Cookie", cookie);
    File.WriteAllText("1.html", httpClient.GetAsync(@"https://example.com/").Result.Content.ReadAsStringAsync().Result);
}
</textarea>
<p>运行一下，看看结果如何。</p>
<p>可以看到带上cookie的结果上已经有个人信息了，成功。</p>
<img class="img" alt="带上个人信息的cookie" src="结果.png">



<br><br><br>
<ul>
    <li>然后是设置协议头: </li>
</ul>
<p>两种方式，先解释一种爆栗版本：</p>
<textarea class="codeTextarea">
client.DefaultRequestHeaders.Add("Authorization", "Bearer YourToken");
</textarea>
<p><code>YourToken</code>直接替换成别的，Bearer + 一个空格保留。</p>
<p>为啥爆栗？</p>
<blockquote cite="chat.bing.com">
    这种方式直接将"Bearer YourToken"作为值添加到"Authorization"头中。这种方法可能会导致格式错误，因为如果你已经有一个名为"Authorization"的头，那么再次添加会抛出异常
</blockquote>
<p>还有优雅地设置Token:</p>
<textarea class="codeTextarea">
httpClient.DefaultRequestHeaders.Authorization = new AuthenticationHeaderValue("Bearer", "Your Oauth token");
</textarea>
<p>更容易理解。</p>



<br><br><br>
<ul>
    <li>讲了这么多，最后发现大佬给了个好方法：</li>
</ul>

<img class="img" src="复制curl.png" alt="如何复制curl(bash)">
<p>然后直接用<a href="https://curlconverter.com/csharp/">这个</a>转换（<a href="https://github.com/curlconverter/curlconverter">源代码</a>）。</p>
<i>其中<code>bash</code>是Linux版本，<code>cmd</code>是Windows版本。</i>